(window.webpackJsonp=window.webpackJsonp||[]).push([[412],{457:function(t,s,e){"use strict";e.r(s);var n=e(0),a=Object(n.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),e("p",[t._v('Now that we have the two items - "Presence_Mobile_John" aka "Johns mobile" and "Wallplug_FF_LR_TV" aka "TV wallplug LR" - we can create a simple rule.\nLet\'s assume we want to turn on the wallplug (and give some juice to the connected TV) as soon as John\'s mobile comes online, turn it off again when the mobile goes offline (this would be a very basic "presence" rule).')]),t._v(" "),e("p",[t._v("Rules are defined in the conf/rules directory.\nSo we create the file default.rules there.")]),t._v(" "),t._m(1),e("p",[t._v("You can create as many .rules files as you want - this eases the overview of different rules/situations. For example:")]),t._v(" "),t._m(2),t._v(" "),e("p",[t._v("For now, we edit the default.rules")]),t._v(" "),t._m(3),e("p",[t._v("The rule syntax in this example is very easy:")]),t._v(" "),t._m(4),e("p",[t._v("The trigger conditions can be one of the following:")]),t._v(" "),t._m(5),t._v(" "),e("p",[e("strong",[t._v("More information on rules can be found "),e("router-link",{attrs:{to:"/docs/configuration/rules-dsl.html"}},[t._v("in the rules section of the user manual!")])],1)]),t._v(" "),e("p",[t._v('The execution block in the example only consists of the "sendCommand" command, which sets the state of the named item.')]),t._v(" "),t._m(6),e("p",[t._v("Once the mobile comes online, the wallplug will turn on, As soon as it goes offline, it will turn off.\nJust as simple as that ðŸ˜ƒ")]),t._v(" "),e("hr"),t._v(" "),t._m(7),t._v(" "),e("hr"),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),e("hr"),t._v(" "),e("DocPreviousVersions"),t._v(" "),e("EditPageLink")],1)},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"working-with-rules-and-scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#working-with-rules-and-scripts","aria-hidden":"true"}},[this._v("#")]),this._v(" Working with rules and scripts")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("conf/rules/default.rules\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("presence.rules for the presence detection")]),this._v(" "),s("li",[this._v("alarm.rules for your alarm actions")]),this._v(" "),s("li",[this._v("tv.rules for rules specific for your SmartTV")]),this._v(" "),s("li",[this._v("and so on")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-rules"}},[e("code",[e("span",{attrs:{class:"token keyword"}},[t._v("rule")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"Wallplug_FF_LR_TV ON"')]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("when")]),t._v("\n  "),e("span",{attrs:{class:"token keyword"}},[t._v("Item")]),t._v(" Presence_Mobile_John "),e("span",{attrs:{class:"token keyword"}},[t._v("changed")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{attrs:{class:"token constant"}},[t._v("OFF")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("to")]),t._v(" "),e("span",{attrs:{class:"token constant"}},[t._v("ON")]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n  "),e("span",{attrs:{class:"token function-name"}},[t._v("Wallplug_FF_LR_TV")]),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("sendCommand")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token constant"}},[t._v("ON")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),e("span",{attrs:{class:"token keyword"}},[t._v("rule")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"Wallplug_FF_LR_TV OFF"')]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("when")]),t._v("\n  "),e("span",{attrs:{class:"token keyword"}},[t._v("Item")]),t._v(" Presence_Mobile_John "),e("span",{attrs:{class:"token keyword"}},[t._v("changed")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{attrs:{class:"token constant"}},[t._v("ON")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("to")]),t._v(" "),e("span",{attrs:{class:"token constant"}},[t._v("OFF")]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n  "),e("span",{attrs:{class:"token function-name"}},[t._v("Wallplug_FF_LR_TV")]),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("sendCommand")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token constant"}},[t._v("OFF")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-rules"}},[e("code",[e("span",{attrs:{class:"token keyword"}},[t._v("rule")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"rule name (should be unique for logging purposes)"')]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("when")]),t._v("\n  "),e("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("TRIGGER CONDITION1"),e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("or")]),t._v("\n  "),e("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("TRIGGER_CONDITION2"),e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("or")]),t._v("\n  "),e("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("TRIGGER_CONDITION3"),e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n  "),e("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("EXECUTION_BLOCK"),e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("Item triggers - just like in the example above. If the state of an item changes, do something")]),this._v(" "),s("li",[this._v("Time triggers - do something at a specified time")]),this._v(" "),s("li",[this._v("System triggers - do something after a system event happened, i.e. openHAB was started or is shut down")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("ItemName.sendCommand"),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),this._v("STATE"),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("This part has to be completed!")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v("Guidelines")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v("I think this will become the longest section")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v("Don't forget to address JSR233 or other alternatives to the DSL that will be built into openHAB")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[e("p",[e("em",[t._v("Event driven development")])])]),t._v(" "),e("li",[e("p",[e("em",[t._v("Format and structure of rules")])])]),t._v(" "),e("li",[e("p",[e("em",[t._v("Difference between actions and posting sending things to items")])])]),t._v(" "),e("li",[e("p",[e("em",[t._v("Functions")])])]),t._v(" "),e("li",[e("p",[e("em",[t._v("Group.members manipulation and how it can help simplify your rules")])])]),t._v(" "),e("li",[e("p",[e("em",[t._v("How to figure out what to import")])])]),t._v(" "),e("li",[e("p",[e("em",[t._v("Working with Time")])])]),t._v(" "),e("li",[e("p",[e("em",[t._v("Working with Timers")])])]),t._v(" "),e("li",[e("p",[e("em",[t._v("Casting to appropriate types and when that is necessary")])])]),t._v(" "),e("li",[e("p",[e("em",[t._v("Working with Numbers")])])]),t._v(" "),e("li",[e("p",[e("em",[t._v("Working with States")])])]),t._v(" "),e("li",[e("p",[e("em",[t._v("Lambdas -> in advanced openHAB")])])]),t._v(" "),e("li",[e("p",[e("em",[t._v("...")])])])])}],!1,null,null,null);a.options.__file="rules.md";s.default=a.exports}}]);