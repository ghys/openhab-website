(window.webpackJsonp=window.webpackJsonp||[]).push([[396],{484:function(t,a,s){"use strict";s.r(a);var e=s(0),n=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v('"Rules" are used for automating processes: Each rule can be triggered, which invokes a script that performs any kinds of tasks, e.g. turn on lights by modifying your items, do mathematical calculations, start timers etcetera.')]),t._v(" "),t._m(1),t._v(" "),s("p"),t._m(2),s("p"),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("Rules are placed in the folder "),s("code",[t._v("${openhab.home}/conf/rules")]),t._v(".\nThe "),s("router-link",{attrs:{to:"/docs/tutorials/demo.html"}},[t._v("demo setup")]),t._v(" already comes with a demo file called "),s("code",[t._v("demo.rules")]),t._v(", which has a couple of examples that can be a good starting point.")],1),t._v(" "),s("p",[t._v("A rule file can contain multiple rules.\nAll rules of a file share a common execution context, i.e. they can access and exchange variables with each other.\nIt therefore makes sense to have different rule files for different use-cases or categories.")]),t._v(" "),t._m(5),t._v(" "),s("p",[t._v("The "),s("router-link",{attrs:{to:"/docs/configuration/editors.html#esh-designer"}},[t._v("Eclipse SmartHome Designer")]),t._v(" offers support for rules building.\nIt includes syntax checks and coloring, validation with error markers, content assist (Ctrl+Space) incl. templates etc.\nThis makes the creation of rules very easy!")],1),t._v(" "),s("blockquote",[s("p",[t._v("Bugs:\nPlease note that there are a couple of "),s("a",{attrs:{href:"https://github.com/eclipse/smarthome/issues?q=is%3Aopen+is%3Aissue+label%3ADesigner+label%3Abug",target:"_blank",rel:"noopener noreferrer"}},[t._v("open bugs"),s("OutboundLink")],1),t._v(" related to the SmartHome Designer.\nThese result in error markers in the Designer, while the rules are executed nicely by the runtime.")])]),t._v(" "),t._m(6),t._v(" "),s("p",[t._v("Note: The rule syntax is based on "),s("a",{attrs:{href:"http://www.eclipse.org/Xtext/#xbase",target:"_blank",rel:"noopener noreferrer"}},[t._v("Xbase"),s("OutboundLink")],1),t._v(" and as a result it is sharing many details with "),s("a",{attrs:{href:"http://www.eclipse.org/xtend/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Xtend"),s("OutboundLink")],1),t._v(", which is built on top of Xbase as well.\nAs a result, we will often point to the Xtend documentation for details.")]),t._v(" "),s("p",[t._v("A rule file is a text file with the following structure:")]),t._v(" "),t._m(7),t._v(" "),s("p",[t._v("The "),s("strong",[t._v("Imports")]),t._v(" section contains import statement just like in Java.\nAs in Java, they make the imported types available without having to use the fully qualified name for them.\nFor further details, please see the "),s("a",{attrs:{href:"http://www.eclipse.org/xtend/documentation/202_xtend_classes_members.html#imports",target:"_blank",rel:"noopener noreferrer"}},[t._v("Xtend documentation for imports"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Example:")]),t._v(" "),t._m(8),s("p",[t._v("A few default imports are already done, so classes from these packages do not need to be explicitly imported:")]),t._v(" "),t._m(9),s("p",[t._v("The "),s("strong",[t._v("Variable Declarations")]),t._v(" section can be used to declare variables that should be accessible to all rules in this file.\nYou can declare variables with or without initial values and modifiable or read-only.\nFor further details, please see the "),s("a",{attrs:{href:"http://www.eclipse.org/xtend/documentation/203_xtend_expressions.html#variable-declaration",target:"_blank",rel:"noopener noreferrer"}},[t._v("Xtend documentation for variable declarations"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Example:")]),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._v(" "),s("p",[t._v("Before a rule starts working, it has to be triggered.")]),t._v(" "),s("p",[t._v("There are different categories of rule triggers:")]),t._v(" "),t._m(15),t._v(" "),s("p",[t._v("Here are the details for each category:")]),t._v(" "),t._m(16),t._v(" "),s("p",[t._v("You can listen to commands for a specific item, on status updates or on status changes (an update might leave the status unchanged).\nYou can decide whether you want to catch only a specific command/status or any.\nHere is the syntax for all these cases (parts in square brackets are optional):")]),t._v(" "),t._m(17),s("p",[t._v("A simplistic explanation of the differences between "),s("code",[t._v("command")]),t._v(" and "),s("code",[t._v("update")]),t._v(" can be found in the article about "),s("router-link",{attrs:{to:"./../addons/actions.html"}},[t._v("openHAB core actions")]),t._v(".")],1),t._v(" "),t._m(18),t._v(" "),s("p",[t._v("You can either use some pre-defined expressions for timers or use a "),s("a",{attrs:{href:"http://www.quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/tutorial-lesson-06",target:"_blank",rel:"noopener noreferrer"}},[t._v("cron expression"),s("OutboundLink")],1),t._v(" instead:")]),t._v(" "),t._m(19),s("p",[t._v("A cron expression takes the form of six or optionally seven fields:")]),t._v(" "),t._m(20),t._v(" "),s("p",[t._v("for more information see the "),s("a",{attrs:{href:"http://www.quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/tutorial-lesson-06",target:"_blank",rel:"noopener noreferrer"}},[t._v("Quartz documentation"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("You may also use "),s("a",{attrs:{href:"http://www.cronmaker.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CronMaker"),s("OutboundLink")],1),t._v(" or the generator at "),s("a",{attrs:{href:"http://www.freeformatter.com/cron-expression-generator-quartz.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("FreeFormatter.com"),s("OutboundLink")],1),t._v(" to generate cron expressions.")]),t._v(" "),t._m(21),t._v(" "),s("p",[t._v("Two system-based triggers are provided as described in the table below:")]),t._v(" "),t._m(22),t._v(" "),s("p",[t._v("You may wish to use the 'System started' trigger to initialize values at startup if they are not already set.")]),t._v(" "),s("p",[t._v("Example:")]),t._v(" "),t._m(23),t._m(24),t._v(" "),s("p",[t._v("Your rules can take actions based upon status updates or status changes generated by Things.\nYou can decide whether you want to catch only a specific or any status the Thing can get updated too.\nHere is the syntax for all these cases (parts in square brackets are optional):")]),t._v(" "),t._m(25),s("p",[t._v("The status used in the trigger and the script is a string (no quotes).\nYou can find all the possible values for status from "),s("router-link",{attrs:{to:"/docs/concepts/things.html"}},[t._v("Thing Status")]),t._v(".\nAnd refer to "),s("router-link",{attrs:{to:"/docs/addons/actions.html"}},[t._v("Thing Status Action")]),t._v(" to find how to get thing status in the script.")],1),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),s("p",[t._v("Some add-ons provide trigger channels.\nCompared with other types of channels, a trigger channel provides information about discrete events, but does not provide continuous state information.")]),t._v(" "),s("p",[t._v("Your rules can take actions based upon trigger events generated by these trigger channels.\nYou can decide whether you want to catch only a specific or any trigger the channel provides.\nHere is the syntax for these cases (parts in square brackets are optional):")]),t._v(" "),t._m(29),t._v(" "),t._m(30),t._m(31),t._v(" "),t._m(32),t._v(" "),s("p",[t._v("Example:")]),t._v(" "),t._m(33),t._m(34),t._v(" "),s("p",[t._v("The expression language used within scripts is the same that is used in the Xtend language - see the "),s("a",{attrs:{href:"http://www.eclipse.org/xtend/documentation/203_xtend_expressions.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("documentation of expressions"),s("OutboundLink")],1),t._v(" on the Xtend homepage.")]),t._v(" "),s("p",[t._v("The syntax is very similar to Java, but has many nice features that allows writing concise code.\nIt is especially powerful in handling collections.\nWhat makes it a good match for openHAB from a technical perspective is the fact that there is no need to compile the scripts as they can be interpreted at runtime.")]),t._v(" "),s("p",[t._v("To be able to do something useful with the scripts, openHAB provides access to")]),t._v(" "),s("ul",[s("li",[t._v("all defined items, so that you can easily access them by their name")]),t._v(" "),t._m(35),t._v(" "),s("li",[t._v("all "),s("a",{attrs:{href:"https://github.com/openhab/openhab/wiki/Actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("standard actions"),s("OutboundLink")],1),t._v(" to make something happen")])]),t._v(" "),s("p",[t._v("Combining these features, you can easily write code like:")]),t._v(" "),t._m(36),t._m(37),t._v(" "),s("p",[t._v("Rules are often used to manipulate the state of an Item, for example switching lights on and off under certain conditions.\nTwo commands can change the value or state of an Item within rules:")]),t._v(" "),t._m(38),t._v(" "),s("p",[t._v("In relation to "),s("router-link",{attrs:{to:"/docs/configuration/rules-dsl.html#event-based-triggers"}},[t._v("event-based rule triggers")]),t._v(" the manipulator commands "),s("code",[t._v("sendCommand")]),t._v(" and "),s("code",[t._v("postUpdate")]),t._v(" act differently.\nThe following table summarizes the impact of the two manipulator commands on the rule execution due to the used trigger:")],1),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._v(" "),t._m(46),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),t._m(49),t._v(" "),t._m(50),t._m(51),t._v(" "),s("p",[t._v("Often it is desired to calculate other values from Item states or to compare Item states against other values")]),t._v(" "),s("p",[t._v("In openHAB, every item carries a state.\nThe state of an Item is an Object itself and can be accessed with "),s("code",[t._v("MyItem.state")]),t._v(".\nA complete and up-to-date list of item types are currently allowed in OpenHAB and the command types each item can accept is given in the "),s("router-link",{attrs:{to:"/docs/concepts/items.html"}},[t._v("openHab documentation for items")]),t._v(".\nTo use the state of an Item in rules it is often necessary to know what type of state the Item is carrying and how to convert it into types that can be used in such operations.\nConversely, to use the result of a calculation to modify the state of an item may require its transformation into a suitable type.")],1),t._v(" "),s("p",[t._v("This section differentiates between command type and state type.\nFor ease of reading, it is possible to simply add “type” to the end of a command type thereby obtaining the state type.\nFor example, a Color Item can receive an OnOffType, IncreaseDecreaseType, PercentType, or HSBType.\nTherefore the following are all valid commands one can send to a Color Item:")]),t._v(" "),t._m(52),t._v(" "),s("p",[t._v("An alternative way to command or update the state of an item is through the use of specially formatted strings.\nThe section in the "),s("router-link",{attrs:{to:"/docs/concepts/items.html#state-and-command-type-formatting"}},[t._v("item documentation on formatting")]),t._v(" details the requirements for the formatting.")],1),t._v(" "),s("p",[t._v("Even though many Items accept commands and updates of various different types, each stores its state internally using only one type.\nThe Color Item from the example above will accept various command types, but will only return an HSBType.")]),t._v(" "),t._m(53),t._v(" "),s("p",[t._v("Each State Type provides a number of convenience methods that will greatly aid in conversion and calculations.\nThere are two ways to discover these methods:")]),t._v(" "),s("ul",[s("li",[t._v("Use the "),s("router-link",{attrs:{to:"/docs/installation/designer.html"}},[t._v("Eclipse SmartHome Designer")]),t._v(" and the "),s("code",[t._v("<ctrl><space>")]),t._v(" key combo to list all the available methods")],1),t._v(" "),s("li",[t._v("Look at the JavaDocs for the given type.\nFor example, the "),s("a",{attrs:{href:"http://www.eclipse.org/smarthome/documentation/javadoc/index.html?org/eclipse/smarthome/core/library/types/HSBType.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaDoc for HSBType"),s("OutboundLink")],1),t._v(' shows getRed, getBlue, and getGreen methods.\nThse methods can be called in Rules-DSL without the "get" part in name as in '),s("code",[t._v("(MyColorItem.state as HSBType).red)")]),t._v(".\nThey retrieve the state of MyColorItem and then casts it as HSBType to be able to use the methods associated with the HSBType.")])]),t._v(" "),t._m(54),t._v(" "),s("p",[s("em",[t._v("Reminder: For a complete and up-to-date list of what item types are currently allowed in openHAB and the command types each item can accept refer to the section on "),s("router-link",{attrs:{to:"/docs/concepts/items.html"}},[t._v("items in the openHAB documentation")]),t._v(".")],1)]),t._v(" "),s("p",[t._v("Below a "),s("strong",[t._v("non-exhaustive")]),t._v(" list of some more common conversions.\nThe interested reader is encouraged to also visit the "),s("a",{attrs:{href:"https://community.openhab.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("forum"),s("OutboundLink")],1),t._v(" where many more examples can be found.")]),t._v(" "),t._m(55),t._v(" "),t._m(56),t._v(" "),t._m(57),t._v(" "),t._m(58),t._v(" "),t._m(59),s("p",[t._v("When individual color values from a HSBType as a PercentType are retrieved, it will be necessary to multiply that PercentType by 255 to obtain a standard 8-bit per color channel RGB.\nCorrespondingly, the for 16 or 32 bit representation, the percent type needs to be multiplied the percent type by 16^2 or 32^2, respectively.")]),t._v(" "),t._m(60),t._m(61),t._v(" "),s("p",[t._v("A Contact Item carries a  OpenClosedType.\nOpenClosedType is an Enumeration.\nOne can convert from Open and Closed to 1 and 0 with code similar to:")]),t._v(" "),t._m(62),t._m(63),t._v(" "),t._m(64),t._v(" "),t._m(65),t._v(" "),t._m(66),s("p",[t._v("In certain cases it is needed to convert an epoch timestamp to a human readable and/or store it in a DateTimeType and a DateTime Item.\nHere an option to do so utilizing SimpleDateFormat:")]),t._v(" "),t._m(67),s("p",[t._v("Both Joda DateTime as well as DateTimeType provide a number of useful methods for comparing date times together and/or extracting parts of the date.\nFor some examples:")]),t._v(" "),t._m(68),t._m(69),t._v(" "),t._m(70),t._v(" "),t._m(71),s("p",[t._v("If the conversion from or into hexadecimal values is necessary, the following examples may be useful:")]),t._v(" "),t._m(72),s("p",[t._v("Additional conversions that might be useful are listed below under NumberItem")]),t._v(" "),t._m(73),t._v(" "),t._m(74),t._v(" "),t._m(75),t._m(76),t._v(" "),t._m(77),t._v(" "),s("p",[t._v("Here some other commonly needed conversions:")]),t._v(" "),t._m(78),t._v(" "),t._m(79),t._m(80),t._v(" "),t._m(81),s("p",[t._v("Other useful conversions can be found under Dimmer Item.")]),t._v(" "),s("p",[t._v("One warning comes with DecimalType (also holds true for QuantityType).\nThe full explanation is "),s("a",{attrs:{href:"https://community.openhab.org/t/ambiguous-feature-call-whats-wrong-designer-user-or-bug/9477/4",target:"_blank",rel:"noopener noreferrer"}},[t._v("beyond the scope of this introduction"),s("OutboundLink")],1),t._v('.\nTo avoid an error mentioning an "Ambiguous Method Call" always cast the state of a DecimalType to a Number, not DecimalType.')]),t._v(" "),t._m(82),t._v(" "),s("p",[t._v("The Player item allows to control players (e.g. audio players) with commands such as Play, Pause, Next, Previous, Rewind and Fastforward.\nThe Player Item carries three types with predefined commands")]),t._v(" "),t._m(83),t._v(" "),s("p",[t._v("These types can be convert from Open and Closed to 1 and 0 with code similar to the Contact Item (OpenClosedType)")]),t._v(" "),t._m(84),t._m(85),t._v(" "),s("p",[t._v("See Location item")]),t._v(" "),t._m(86),t._v(" "),s("p",[t._v("See Dimmer\nIn addition to the command types of the item type Dimmer, the Rollershutter item accepts the StopMoveType with the commands STOP and MOVE")]),t._v(" "),t._m(87),t._v(" "),s("p",[t._v("To convert the state of an Item that carries a StringType, the method toString can be invoked.")]),t._v(" "),t._m(88),s("p",[t._v("In case an item returns a string containing a value as a hexadecimal number, it can be converted to an integer by using")]),t._v(" "),t._m(89),t._m(90),t._v(" "),s("p",[t._v("A Switch Item carries a OnOffType.\nOnOffType is an Enumeration.\nOne can convert from ON and OFF to 1 and 0 with code similar to:")]),t._v(" "),t._m(91),t._m(92),t._v(" "),t._m(93),t._v(" "),t._m(94),t._v(" "),t._m(95),t._v(" "),s("p",[t._v("The different syntax for the generic and the objective-specific differs and is given in the table below:")]),t._v(" "),t._m(96),t._v(" "),t._m(97),t._v(" "),t._m(98),t._v(" "),s("p",[t._v("Besides the implicitly available variables for items and commands/states, rules can have additional pre-defined variables, depending on their triggers:")]),t._v(" "),t._m(99),t._v(" "),t._m(100),t._v(" "),s("p",[t._v("It is possible to return early from a rule, not executing the rest of the statements like this:")]),t._v(" "),t._m(101),s("p",[t._v("Caveat: Please note the semicolon after the return statement which terminates the command without an additional argument.")]),t._v(" "),t._m(102),t._v(" "),s("p",[t._v("If a rule triggers on UI events it may be necessary to guard against concurrency.")]),t._v(" "),t._m(103),t._m(104),t._v(" "),s("p",[t._v("openHAB "),s("router-link",{attrs:{to:"/docs/addons/transformations.html"}},[t._v("Transformation services")]),t._v(" can be used in rules to transform/translate/convert data.")],1),t._v(" "),s("p",[t._v("The general syntax is as follows:")]),t._v(" "),t._m(105),t._m(106),t._v(" "),s("p",[t._v("Examples:")]),t._v(" "),t._m(107),t._m(108),t._v(" "),t._m(109),s("p",[t._v("Example:")]),t._v(" "),t._m(110),s("p",[t._v("For all available Transformation services please refer to the list of "),s("router-link",{attrs:{to:"/docs/addons/transformations.html"}},[t._v("Transformation Add-ons")]),t._v(".")],1),t._v(" "),t._m(111),t._v(" "),s("p",[t._v("You can emit log messages from your rules to aid debugging.\nThere are a number of logging methods available from your rules, the java signatures are:")]),t._v(" "),t._m(112),t._m(113),t._v(" "),t._m(114),s("p",[t._v("then the logger you would have to configure to have your messages appearing in the console would be:")]),t._v(" "),t._m(115),t._m(116),t._v(" "),s("p",[t._v("Below some examples for common rules:")]),t._v(" "),t._m(117),t._m(118),t._v(" "),s("p",[t._v("Many more examples can be found in the "),s("a",{attrs:{href:"https://community.openhab.org/c/tutorials-examples",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tutorials & Examples"),s("OutboundLink")],1),t._v(" category of the community forum.\nThey are community provided and new ones are added constantly.")]),t._v(" "),s("DocPreviousVersions"),t._v(" "),s("EditPageLink")],1)},[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"textual-rules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#textual-rules","aria-hidden":"true"}},[this._v("#")]),this._v(" Textual Rules")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("openHAB has a highly integrated, lightweight but yet powerful rule engine included.\nOn this page you will learn how to leverage its functionality to do "),a("em",[this._v("real")]),this._v(" home automation.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#defining-rules"}},[t._v("Defining Rules")]),s("ul",[s("li",[s("a",{attrs:{href:"#file-location"}},[t._v("File Location")])]),s("li",[s("a",{attrs:{href:"#ide-support"}},[t._v("IDE Support")])]),s("li",[s("a",{attrs:{href:"#the-syntax"}},[t._v("The Syntax")])]),s("li",[s("a",{attrs:{href:"#rule-triggers"}},[t._v("Rule Triggers")])]),s("li",[s("a",{attrs:{href:"#event-based-triggers"}},[t._v("Event-based Triggers")])]),s("li",[s("a",{attrs:{href:"#time-based-triggers"}},[t._v("Time-based Triggers")])]),s("li",[s("a",{attrs:{href:"#system-based-triggers"}},[t._v("System-based Triggers")])]),s("li",[s("a",{attrs:{href:"#thing-based-triggers"}},[t._v("Thing-based Triggers")])]),s("li",[s("a",{attrs:{href:"#channel-based-triggers"}},[t._v("Channel-based Triggers")])])])]),s("li",[s("a",{attrs:{href:"#scripts"}},[t._v("Scripts")]),s("ul",[s("li",[s("a",{attrs:{href:"#manipulating-item-states"}},[t._v("Manipulating Item States")])]),s("li",[s("a",{attrs:{href:"#using-the-states-of-items-in-rules"}},[t._v("Using the States of Items in Rules")])]),s("li",[s("a",{attrs:{href:"#implicit-variables-inside-the-execution-block"}},[t._v("Implicit Variables inside the Execution Block")])]),s("li",[s("a",{attrs:{href:"#early-returns"}},[t._v("Early returns")])]),s("li",[s("a",{attrs:{href:"#concurrency-guard"}},[t._v("Concurrency Guard")])]),s("li",[s("a",{attrs:{href:"#transformations"}},[t._v("Transformations")])]),s("li",[s("a",{attrs:{href:"#logging"}},[t._v("Logging")])])])]),s("li",[s("a",{attrs:{href:"#rule-examples"}},[t._v("Rule Examples")])]),s("li",[s("a",{attrs:{href:"#further-examples"}},[t._v("Further Examples")])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"defining-rules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#defining-rules","aria-hidden":"true"}},[this._v("#")]),this._v(" Defining Rules")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"file-location"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#file-location","aria-hidden":"true"}},[this._v("#")]),this._v(" File Location")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"ide-support"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ide-support","aria-hidden":"true"}},[this._v("#")]),this._v(" IDE Support")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"the-syntax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-syntax","aria-hidden":"true"}},[this._v("#")]),this._v(" The Syntax")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("Imports")]),this._v(" "),a("li",[this._v("Variable Declarations")]),this._v(" "),a("li",[this._v("Rules")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[this._v("import")]),this._v(" java"),a("span",{attrs:{class:"token punctuation"}},[this._v(".")]),this._v("net"),a("span",{attrs:{class:"token punctuation"}},[this._v(".")]),a("span",{attrs:{class:"token constant"}},[this._v("URI")]),this._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("org"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eclipse"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("smarthome"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("items\norg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eclipse"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("smarthome"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("persistence\norg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eclipse"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("smarthome"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("library"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("types\norg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eclipse"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("smarthome"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("library"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("items\norg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eclipse"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("smarthome"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("script"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("actions\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// a variable with an initial value. Note that the variable type is automatically inferred")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" counter "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// a read-only value, again the type is automatically inferred")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" msg "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"This is a message"')]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// an uninitialized variable where we have to provide the type (as it cannot be inferred from an initial value)")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Number")]),t._v(" x\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("The "),a("strong",[this._v("Rules")]),this._v(" section contains a list of rules.\nEach rule has the following syntax:")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("rule")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"<RULE_NAME>"')]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("when")]),t._v("\n    "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("TRIGGER_CONDITION"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token keyword"}},[t._v("or")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("TRIGGER_CONDITION2"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token keyword"}},[t._v("or")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("SCRIPT_BLOCK"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ul",[s("li",[s("code",[t._v("<RULE_NAME>")]),t._v(" - Each rule must have a unique name (given within quotes). It is recommended that you choose a name that has meaning when spoken.")]),t._v(" "),s("li",[s("code",[t._v("<TRIGGER_CONDITION>")]),t._v(" - The triggering event upon which the rule logic is executed. A rule is executed in reaction to one or more trigger conditions. Multiple conditions are separated by the keyword "),s("code",[t._v("or")]),t._v(". Please see below for different possible triggers.")]),t._v(" "),s("li",[s("code",[t._v("<SCRIPT_BLOCK>")]),t._v(" - Contains the logic that should be executed when a trigger condition is met, see the "),s("a",{attrs:{href:"#scripts"}},[t._v("script")]),t._v(" section for details on its syntax.")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"rule-triggers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rule-triggers","aria-hidden":"true"}},[this._v("#")]),this._v(" Rule Triggers")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ul",[s("li",[s("strong",[t._v("Item")]),t._v("(-Event)-based triggers: They react on events on the openHAB event bus, i.e. commands and status updates for items")]),t._v(" "),s("li",[s("strong",[t._v("Time")]),t._v("-based triggers: They react at special times, e.g. at midnight, every hour, etc.")]),t._v(" "),s("li",[s("strong",[t._v("System")]),t._v("-based triggers: They react on certain system statuses.")]),t._v(" "),s("li",[s("strong",[t._v("Thing")]),t._v("-based triggers: They react on thing status, i.e. change from ONLINE to OFFLINE.")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"event-based-triggers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-based-triggers","aria-hidden":"true"}},[this._v("#")]),this._v(" Event-based Triggers")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("Item")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("item"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("received command")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("command"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("Item")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("item"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("received update")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("state"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("Item")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("item"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("changed")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("state"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token keyword"}},[t._v("to")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("state"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"time-based-triggers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#time-based-triggers","aria-hidden":"true"}},[this._v("#")]),this._v(" Time-based Triggers")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dsl"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("Time")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("is")]),t._v(" midnight\n"),s("span",{attrs:{class:"token keyword"}},[t._v("Time")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("is")]),t._v(" noon\n"),s("span",{attrs:{class:"token keyword"}},[t._v("Time")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("cron")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"<cron expression>"')]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ol",[s("li",[t._v("Seconds")]),t._v(" "),s("li",[t._v("Minutes")]),t._v(" "),s("li",[t._v("Hours")]),t._v(" "),s("li",[t._v("Day-of-Month")]),t._v(" "),s("li",[t._v("Month")]),t._v(" "),s("li",[t._v("Day-of-Week")]),t._v(" "),s("li",[t._v("Year (optional field)")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"system-based-triggers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#system-based-triggers","aria-hidden":"true"}},[this._v("#")]),this._v(" System-based Triggers")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("table",[s("thead",[s("tr",[s("th",[t._v("Trigger")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("System started")]),t._v(" "),s("td",[t._v("System started is triggered upon openHAB startup, after the rule file containing the System started trigger is modified, or after item(s) related to that rule file are modified in a .items file.")])]),t._v(" "),s("tr",[s("td",[t._v("System shuts down")]),t._v(" "),s("td",[t._v("Rules using the 'System shuts down' trigger execute when openHAB shuts down.")])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("rule")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Speedtest init"')]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("when")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("System started")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),s("span",{attrs:{class:"token function"}},[t._v("createTimer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("now"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("plusSeconds")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("30")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("Speedtest_Summary")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{attrs:{class:"token function-name"}},[t._v("Speedtest_Summary")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('""')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token function-name"}},[t._v("Speedtest_Summary")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("postUpdate")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"unknown"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"thing-based-triggers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#thing-based-triggers","aria-hidden":"true"}},[this._v("#")]),this._v(" Thing-based Triggers")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("Thing")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("thingUID"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("received update")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("status"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("Thing")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("thingUID"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("changed")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("status"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token keyword"}},[t._v("to")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("status"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("The "),a("code",[this._v("thingUID")]),this._v(' is the identifier assigned to the Thing, manually in your configuration or automatically during auto discovery.\nYou can find it from PaperUI or from Karaf remote console.\nFor example, one z-wave device can be "zwave:device:c5155aa4:node14".')])},function(){var t=this.$createElement,a=this._self._c||t;return a("blockquote",[a("p",[this._v("Note: You need to use quotes around "),a("code",[this._v("thingUID")]),this._v(" if it contains special characters such as ':'.")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"channel-based-triggers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#channel-based-triggers","aria-hidden":"true"}},[this._v("#")]),this._v(" Channel-based Triggers")])},function(){var t=this.$createElement,a=this._self._c||t;return a("blockquote",[a("p",[this._v("Note: You need to use quotes around "),a("code",[this._v("triggerChannel")]),this._v(" if it contains special characters such as "),a("code",[this._v(":")]),this._v(".")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("Channel")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"<triggerChannel>"')]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("triggered")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("triggerEvent"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("triggerChannel")]),this._v(" is the identifier for a specific channel.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("When a binding provides such channels, you can find the needed information in the corresponding binding documentation.\nThere is no generic list of possible values for "),a("code",[this._v("triggerEvent")]),this._v(",\nThe "),a("code",[this._v("triggerEvent")]),this._v("(s) available depend upon the specific implementation details of the binding.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("rule")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Start wake up light on sunrise"')]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("when")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("Channel")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"astro:sun:home:rise#event"')]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("triggered")]),t._v(" START\n"),s("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"scripts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scripts","aria-hidden":"true"}},[this._v("#")]),this._v(" Scripts")])},function(){var t=this.$createElement,a=this._self._c||t;return a("li",[this._v("all enumerated states/commands, e.g. "),a("code",[this._v("ON, OFF, DOWN, INCREASE")]),this._v(" etc.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Temperature"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("20")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Heating"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("sendCommand")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ON"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"manipulating-item-states"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#manipulating-item-states","aria-hidden":"true"}},[this._v("#")]),this._v(" Manipulating Item States")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[a("code",[this._v("MyItem.postUpdate(<new_state>)")]),this._v(" - Change the status of an Item without causing any implicit actions. Can be used to reflect changes that may be caused by other means.")]),this._v(" "),a("li",[a("code",[this._v("MyItem.sendCommand(<new_state>)")]),this._v(" - Change the status of an Item and trigger potential further actions, e.g. send a command to the linked device/binding.")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("table",[s("thead",[s("tr",[s("th",[t._v("Command \\ Rule Trigger")]),t._v(" "),s("th",[s("code",[t._v("received update")])]),t._v(" "),s("th",[s("code",[t._v("received command")])]),t._v(" "),s("th",[s("code",[t._v("changed")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("postUpdate")]),t._v(" "),s("td",[t._v("⚡ rule fires")]),t._v(" "),s("td",[t._v("❌")]),t._v(" "),s("td",[t._v("(depends)")])]),t._v(" "),s("tr",[s("td",[t._v("sendCommand")]),t._v(" "),s("td",[t._v("❌")]),t._v(" "),s("td",[t._v("⚡ rule fires")]),t._v(" "),s("td",[t._v("(depends)")])]),t._v(" "),s("tr",[s("td",[s("em",[t._v("Change through Binding")])]),t._v(" "),s("td",[t._v("⚡ rule fires")]),t._v(" "),s("td",[t._v("⚡ rule fires")]),t._v(" "),s("td",[t._v("(depends)")])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[s("strong",[t._v("Beware:")]),t._v("\nBesides the specific manipulator command methods "),s("code",[t._v("MyItem.sendCommand(<new_state>)")]),t._v(" and "),s("code",[t._v("MyItem.postUpdate(<new_state>)")]),t._v(", generic manipulators in the form of "),s("code",[t._v("sendCommand(MyItem, <new_state>)")]),t._v(" and "),s("code",[t._v("postUpdate(MyItem, <new_state>)")]),t._v(" are available. The specific versions is normally recommended.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h4",{attrs:{id:"myitem-sendcommand-new-state-versus-sendcommand-myitem-new-state"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#myitem-sendcommand-new-state-versus-sendcommand-myitem-new-state","aria-hidden":"true"}},[this._v("#")]),this._v(' MyItem.sendCommand("new state") versus sendCommand(MyItem, "new state")')])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Using the methods "),a("code",[this._v("MyItem.sendCommand(<new_state>)")]),this._v(" and "),a("code",[this._v("MyItem.postUpdate(<new_state>)")]),this._v(" is often preferable.\nThese are methods of Objects that can accept a variety of types.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Contrary, the Actions "),a("code",[this._v('sendCommand(MyItem, "<new_state>")')]),this._v(" and "),a("code",[this._v('postUpdate(MyItem, "<new_state>")')]),this._v(" can only accept strings as arguments.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("The reasons lie within Java, the object-oriented programming language on which openHAB is built.\nJava and the Rules DSL have two basic types, primitives and Objects.\nA lower case letter data type after a "),s("code",[t._v("var")]),t._v(" or a "),s("code",[t._v("val")]),t._v(" statement, for example "),s("code",[t._v("var int")]),t._v(", indicates a primitive type.\nAn upper case letter data type after a "),s("code",[t._v("val")]),t._v(" and "),s("code",[t._v("var")]),t._v(" statement, for example "),s("code",[t._v("var Number")]),t._v(" indicates an Object.\nObjects are more complex than primitives.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("Objects have special methods that can perform many necessary type conversions automatically.\nUsing "),s("code",[t._v("Myitem.sendCommand(new_state)")]),t._v(" or "),s("code",[t._v("Myitem.postUpdate(new_state)")]),t._v(" will, in most cases, convert "),s("code",[t._v("new_state")]),t._v(" into a type that Object "),s("code",[t._v("myItem")]),t._v(" can apply.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("The Action "),a("code",[this._v("sendCommand(MyItem, new_state)")]),this._v(" does not provide the same flexibilty.\nFor example, if "),a("code",[this._v("new_state")]),this._v(" is typed as a primitive (e.g., "),a("code",[this._v("var int new_state = 3")]),this._v(") and myItem is of the Object type Dimmer:")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ul",[s("li",[t._v("the following command "),s("em",[s("strong",[t._v("will fail")])]),t._v(": "),s("s",[t._v("sendCommand(MyItem, new_state)")]),t._v(".")]),t._v(" "),s("li",[t._v("However, the following command "),s("strong",[t._v("will work")]),t._v(": "),s("code",[t._v("MyItem.sendCommand(new_state)")]),t._v(".")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("Using "),s("code",[t._v("MyItem.postUpdate(new_state)")]),t._v(" or "),s("code",[t._v("MyItem.sendCommand(new_state)")]),t._v(" will create the most stable code.\nIt provides by far the best option for avoiding most problems.\nThis syntax ensures that any conversion (typing) of the "),s("code",[t._v("new_state")]),t._v(" is done in a way that is most suitable for "),s("code",[t._v("myItem")]),t._v(".")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("Exception:")]),this._v("\nActions are useful when the name of the Item is only available as a String.\nFor example, if the name of the Item to receive an update or command was calculated in the Rule by building up a String:")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" index "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("5")]),t._v("\n"),s("span",{attrs:{class:"token function"}},[t._v("sendCommand")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"My_Lamp_"')]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" index"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("ON")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"using-the-states-of-items-in-rules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-the-states-of-items-in-rules","aria-hidden":"true"}},[this._v("#")]),this._v(" Using the States of Items in Rules")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[a("code",[this._v("MyColorItem.sendCommand(ON)")])]),this._v(" "),a("li",[a("code",[this._v("MyColorItem.sendCommand(INCREASE)")])]),this._v(" "),a("li",[a("code",[this._v("MyColorItem.sendCommand(new PercentType(50))")])]),this._v(" "),a("li",[a("code",[this._v("MyColorItem.sendCommand(new HSBType(new DecimalType(123), new PercentType(45), new PercentType(67)))")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Groups can be declared with any Item type and the internal state of the Group will match that type.\nFor example, "),a("code",[this._v("Group:Switch")]),this._v(" will return an OnOffType for its state.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h4",{attrs:{id:"working-with-item-states-conversions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#working-with-item-states-conversions","aria-hidden":"true"}},[this._v("#")]),this._v(" Working with Item States: Conversions")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h5",{attrs:{id:"conversion-of-item-state-to-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conversion-of-item-state-to-string","aria-hidden":"true"}},[this._v("#")]),this._v(" Conversion of Item.state to String")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("All Item states can be converted into a string by invoking "),a("code",[this._v("MyItem.state.toString")]),this._v(".")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h5",{attrs:{id:"color-item"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#color-item","aria-hidden":"true"}},[this._v("#")]),this._v(" Color Item")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("A Color Item stores an "),a("strong",[this._v("HSBType")]),this._v(".\nThe HSB stands for Hue, Saturation, and Brightness.\nOften one has the desired color as an RGB values (Red, Green, Blue).\nThe following code can be used to send an RGB value to a Color Item.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" java"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("awt"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token class-name"}},[t._v("Color")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Create item")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" newColor "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Color")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("red"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" blue"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" green"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// where red, blue, and green are ints between 0 and 255")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("//Saving to an Item")]),t._v("\n"),s("span",{attrs:{class:"token function-name"}},[t._v("MyColorItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("sendCommand")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("HSBType")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newColor"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("//Example for conversion to 8-bit representation")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// In rule body")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" red "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("MyColorItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("HSBType")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("red "),s("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("255")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" green "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("MyColorItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("HSBType")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("green "),s("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("255")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" blue "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("MyColorItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("HSBType")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("blue "),s("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("255")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h5",{attrs:{id:"contact-item"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contact-item","aria-hidden":"true"}},[this._v("#")]),this._v(" Contact Item")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" contactNum "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("MyContactItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("OPEN")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h5",{attrs:{id:"datetime-item"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#datetime-item","aria-hidden":"true"}},[this._v("#")]),this._v(" DateTime Item")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("A DateTime Item carries a "),a("strong",[this._v("DateTimeType")]),this._v(".\nDateTimeType presents the biggest challenge when converting and performing calculations.\nThe problems stem from the fact that by default the Rules use a Joda DateTime class to represent time, most notably "),a("code",[this._v("now")]),this._v(".\nHowever, DateTimeType is not a Joda DateTime and in fact the two are incompatible, requiring some conversion in order to use the two together.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("The lowest common denominator when working with time is to get at the epoch value.\nEpoch is the number of milliseconds that has passed since 1 January 1970 GMT and stored in a "),a("code",[this._v("long")]),this._v(".\nWith epoch, one can compare two dates together, convert a Joda DateTime to a DateTimeType and visa versa.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// Get epoch from DateTimeType")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Number")]),t._v(" epoch "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("MyDateTimeItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DateTimeType")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("calendar"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timeInMillis\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Get epoch from Joda DateTime")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Number")]),t._v(" nowEpoch "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" now"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("millis\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Convert DateTimeType to Joda DateTime")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" joda "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DateTime")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("MyDateTimeItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DateTimeType")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("calendar"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timeInMillis"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Convert Joda DateTime to DateTimeType")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" calendar "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" java"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function-name"}},[t._v("Calendar")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("getInstance")]),t._v("\ncalendar"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timeInMillis "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" now"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("millis\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" dtt "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DateTimeType")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("calendar"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" java"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token class-name"}},[t._v("SimpleDateFormat")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" java"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token class-name"}},[t._v("Date")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Convert epoch to a human readable")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("SimpleDateFormat")]),t._v(" sdf "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("SimpleDateFormat")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("String")]),t._v(" timestampString "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sdf"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("format")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timestampEpoch"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Convert human readable time stamp to DateTimeType")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DateTimeType")]),t._v(" timestamp "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function-name"}},[t._v("DateTimeType")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("valueOf")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timestampString"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("//convert state from Item of DateTimeType into a string")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("String")]),t._v(" datetime_string  "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function-name"}},[t._v("DateTime_Item")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("format")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"%1$td.%1$tm.%1$ty %1$tH:%1$tM"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// See if DateTimeType is before Joda DateTime")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("now"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("isBefore")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("MyDateTimeItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DateTimeType")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("calendar"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timeInMillis"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// See if DateTimeType is after Joda DateTime")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("now"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("isAfter")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("MyDateTimeItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DateTimeType")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("calendar"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timeInMillis"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Get the hour in the day from a DateTimeType")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" hours "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("MyDateTimeItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DateTimeType")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("calendar"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("get")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("Calendar")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("HOUR_OF_DAY"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// See the Calendar javadocs for the full set of parameters available")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h5",{attrs:{id:"dimmer-item"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dimmer-item","aria-hidden":"true"}},[this._v("#")]),this._v(" Dimmer Item")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("A Dimmer Item carries a "),a("strong",[this._v("PercentType")]),this._v(".\nPercentType can be cast to and treated like a java.lang.Number, where Number represents any type of numerical value.\nThe Rules language supports doing mathematical and logical operations with Numbers\nThe Number Object supports methods for getting primitive versions of that Number if needed.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("//Loading from an Item")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" dimVal "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function-name"}},[t._v("MyDimmerItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Number")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("//as integer")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("int")]),t._v(" dimAsInt "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" dimVal"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("intValue")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// as float")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("float")]),t._v(" dimAsFloat "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" dimVal"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("floatValue")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// to convert a hex_code (a number expressed in hexadecimals) to a Number type ")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" dimVal "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),s("span",{attrs:{class:"token function-name"}},[t._v("Integer")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("parseInt")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hex_code"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("16")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Number")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("//for very large_hex_codes use")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" dimVal "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function-name"}},[t._v("Long")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("valueOf")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("large_hex_code"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("16")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("longValue")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Number")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// and here an additional example to convert an integer_value to hex_code string")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("String")]),t._v(" hex "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function-name"}},[t._v("Long")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("toHexString")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("integer_value"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h5",{attrs:{id:"location-item"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#location-item","aria-hidden":"true"}},[this._v("#")]),this._v(" Location Item")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("A Location Items carries a "),a("strong",[this._v("PointType")]),this._v(".\nA PointType consist of two or three DecimalType numbers representing latitude and longitude in degrees, and an optional altitude in meters.\nHere are a few examples:")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// Creation")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" location "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("PointType")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DecimalType")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("50.12345")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DecimalType")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("10.12345")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Creation from String; ATTENTION: do not add space after comma")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("PointType")]),t._v(" home "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("PointType")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"12.121212,123.123123"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Loading from an Item")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("PointType")]),t._v(" location "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function-name"}},[t._v("Device_Coordinates")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("PointType")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h5",{attrs:{id:"number-item"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#number-item","aria-hidden":"true"}},[this._v("#")]),this._v(" Number Item")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("A Number Items carries either a "),s("strong",[t._v("DecimalType")]),t._v(" or a "),s("strong",[t._v("QuantityType")]),t._v(" in case the Number Item has a dimension attached (e.g. "),s("code",[t._v("Number:Temperature")]),t._v(" in the items file). In rules, units are added to a number by a "),s("code",[t._v("|")]),t._v(", where the unit has to be put in quotes, if it contains non-alphabetic characters, e.g. "),s("code",[t._v("10|m")]),t._v(", but "),s("code",[t._v("20|\"km/h\"'. A couple of commonly used units do not necessarily require quotes, these are '°C', '°F', 'Ω', '°', '%', 'm²' and 'm³', so it is ok to write")]),t._v('20|"°C"'),s("code",[t._v(", but")]),t._v("20|°C` will also work.\nDecimalType and QuantityType are also java.lang.Number so all the conversions listed above under Dimmer Item apply to Number Item as well.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("For DecimalType states:")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("//convert integer_number to string containing hex_code")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("String")]),t._v(" hex_code "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function-name"}},[t._v("Long")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("toHexString")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("integer_number"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("//convert hex_code to Number type")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MyNumber")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function-name"}},[t._v("Integer")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("parseInt")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hex_code"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("16")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Number")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("//use the following for large_hex_code")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MyNumber")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function-name"}},[t._v("Long")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("parseLong")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hex"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("16")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Number")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// coverting hex_code into DecimalType")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DecimalType")]),t._v(" parsedResult "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function-name"}},[t._v("DecimalType")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("valueOf")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("Long")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("parseLong")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hex_code"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("16")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("toString")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("For QuantityType states:")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// define a QuantityType variable")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myTemperature "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("20")]),s("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("°C\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// convert a quantity state into a different unit:")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" fahrenheit "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" myTemperature"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("toUnit")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"°F"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// convert scalar value to DecimalType")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myDecimal "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DecimalType")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fahrenheit"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("doubleValue")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// myDecimal == 68")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// access scalar values as int, double, float")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myInt "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" fahrenheit"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("intValue")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" mydouble "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" fahrenheit"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("doubleValue")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myfloat "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" fahrenheit"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("floatValue")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// check if a number item state is a QuantityType")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" isQuantity "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" myItem"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("QuantityType")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h5",{attrs:{id:"player-item"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#player-item","aria-hidden":"true"}},[this._v("#")]),this._v(" Player Item")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("table",[s("thead",[s("tr",[s("th",[t._v("State Type")]),t._v(" "),s("th",[t._v("Commands")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("PlayPauseType")])]),t._v(" "),s("td",[t._v("PLAY, PAUSE")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("RewindFastforwardType")])]),t._v(" "),s("td",[t._v("REWIND, FASTFORWARD")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("NextPreviousType")])]),t._v(" "),s("td",[t._v("NEXT, PREVIOUS")])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("//Loading from an Item")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("int")]),t._v(" Playing "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("MyPlayerItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("PLAY")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h5",{attrs:{id:"pointtype"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pointtype","aria-hidden":"true"}},[this._v("#")]),this._v(" PointType")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h5",{attrs:{id:"rollershutter-item"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rollershutter-item","aria-hidden":"true"}},[this._v("#")]),this._v(" Rollershutter Item")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h5",{attrs:{id:"string-item"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#string-item","aria-hidden":"true"}},[this._v("#")]),this._v(" String Item")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("//Loading from an Item")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" stateAsString "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function-name"}},[t._v("MyStringItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("toString")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("//Loading hexvalue from string")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" itemvalue "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" java"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("math"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("BigDecimal")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("Integer")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("parseInt")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myHexValue"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("16")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h5",{attrs:{id:"switch-item"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#switch-item","aria-hidden":"true"}},[this._v("#")]),this._v(" Switch Item")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("SwitchNum")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token function-name"}},[t._v("MySwitchItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("ON")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h4",{attrs:{id:"deeper-dive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deeper-dive","aria-hidden":"true"}},[this._v("#")]),this._v(" Deeper Dive")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("While interacting with Item states, care must be taken to understand the difference between Objects and primitives.\nAs all object-oriented computer languages, Java and the Rules DSL have implemented the concept of inheritance.\nHowever, inheritance only applies to Objects and does "),s("strong",[t._v("not")]),t._v(" apply to primitives; examples for primitives are "),s("code",[t._v("integer")]),t._v(" and "),s("code",[t._v("boolean")]),t._v(".\nInheritance allows to take an existing Object type, called a Class, and adding to it to make it into something different.\nThis “something different” becomes a Child of the original Class, the parent. The Child still can do everything the parent could do.\nThe top level base Class for all Objects in Java and the Rules DSL is called simply "),s("code",[t._v("Object")]),t._v(".")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("In addition to other useful things, the class "),s("code",[t._v("Object")]),t._v(" implements a method called "),s("code",[t._v("toString")]),t._v(".\nAnd since "),s("code",[t._v("Object")]),t._v(" is the parent of all Objects, ALL Classes also implement a "),s("code",[t._v("toString")]),t._v(" method.\n"),s("em",[t._v("However primitives do not inherit from Object.\nThey don't inherit from anything and they don't have any methods at all which includes the lack of a toString Method.")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("Objects are typically equipped with many more type conversion methods, while primitives do not support any type conversion.\nThis distinction is very relevant when trying to use the result of a calculation and apply it to an Item state.\nThe "),s("code",[t._v("sendCommand")]),t._v(" is a generic action and needs to be able to work with all Item types.\nActions only support two String arguments as all Objects will support the conversion "),s("code",[t._v("toString")]),t._v(".\n"),s("code",[t._v("sendCommand (MyItem, new_state)")]),t._v(" will automatically use the "),s("code",[t._v("MyItem.toString")]),t._v(" method to convert MyItem into a String.\nIt will also attempt to do so with the second argument if "),s("code",[t._v("new_state")]),t._v(" is not already a String.\nHowever, if the second argument is a primitive, and not an Object, it does not carry a method "),s("code",[t._v("toString")]),t._v(".\nThus, Rules DSL will not be able to cast "),s("code",[t._v("new_state")]),t._v(" as a String.\nAs a consequence, the use of "),s("code",[t._v("sendCommand(MyItem, primitive)")]),t._v(", using a primitive as the second argument, will almost always fail.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("table",[s("thead",[s("tr",[s("th",[t._v("Generic (Action)")]),t._v(" "),s("th",[t._v("Specific (Method)")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("postUpdate(MyItem, new_state)")])]),t._v(" "),s("td",[s("code",[t._v("MyItem.postUpdate(new_state)")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("sendCommand(MyItem, new_state)")])]),t._v(" "),s("td",[s("code",[t._v("MyItem.sendCommand(new_state)")])])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("The benefit of using Objects over primitives is apparent through the following type conversions that are automatically invoked by Object as the context requires.\nUsing the method "),s("code",[t._v("MyTimes.sendCommand()")]),t._v(" that is owned by MyItem will use the "),s("code",[t._v("sendCommand")]),t._v(" method that is suitable to make the necessary type conversions.\nFor example, the "),s("code",[t._v("NumberItem")]),t._v(" class would have a "),s("code",[t._v("sendCommand(int)")]),t._v(", "),s("code",[t._v("sendCommand(long)")]),t._v(", "),s("code",[t._v("sendCommand(float)")]),t._v(", "),s("code",[t._v("sendCommand(double)")]),t._v(", "),s("code",[t._v("sendCommand(Number)")]),t._v(", "),s("code",[t._v("sendCommand(DecimalType)")]),t._v(", and "),s("code",[t._v("sendCommand(String)")]),t._v(" method.\nEach of these separate methods is individually written to handle all of these different types of Objects.\nMyItem will automatically apply the method that corresponds to the argument type.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"implicit-variables-inside-the-execution-block"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#implicit-variables-inside-the-execution-block","aria-hidden":"true"}},[this._v("#")]),this._v(" Implicit Variables inside the Execution Block")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ul",[s("li",[s("code",[t._v("receivedCommand")]),t._v(" - will be implicitly available in every rule that has at least one command event trigger.")]),t._v(" "),s("li",[s("code",[t._v("previousState")]),t._v(" - will be implicitly available in every rule that has at least one status change event trigger.")]),t._v(" "),s("li",[s("code",[t._v("triggeringItem")]),t._v(" - will be implicitly available in every rule that has at least one command, status update, or status change event trigger.")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"early-returns"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#early-returns","aria-hidden":"true"}},[this._v("#")]),this._v(" Early returns")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Temperature"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("20")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nHeating"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("sendCommand")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ON"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"concurrency-guard"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#concurrency-guard","aria-hidden":"true"}},[this._v("#")]),this._v(" Concurrency Guard")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" java"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("concurrent"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("locks"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token class-name"}},[t._v("ReentrantLock")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ReentrantLock")]),t._v(" lock  "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ReentrantLock")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("rule")]),t._v(" ConcurrentCode\n"),s("span",{attrs:{class:"token keyword"}},[t._v("when")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("Item")]),t._v(" Dummy "),s("span",{attrs:{class:"token keyword"}},[t._v("received update")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    lock"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("lock")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token comment"}},[t._v("// do stuff")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("finally")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        lock"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("unlock")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"transformations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#transformations","aria-hidden":"true"}},[this._v("#")]),this._v(" Transformations")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token function"}},[t._v("transform")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"<transformation-identifier>"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"<transf. expression or transf. file name>"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("input"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("data or variable"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ul",[s("li",[s("code",[t._v("<transformation-identifier>")]),t._v(" - Shorthand identifier of the transformation service")]),t._v(" "),s("li",[s("code",[t._v("<transf. expression or transf. file name>")]),t._v(" - Transformation service specific")]),t._v(" "),s("li",[s("code",[t._v("<input-data or variable>")]),t._v(" - The data to transform, MUST be of data type "),s("em",[t._v("String")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" condition "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("transform")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"MAP"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"window_esp.map"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"CLOSED"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" temperature "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("transform")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"JSONPATH"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"$.temperature"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" jsonstring"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" fahrenheit "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("transform")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"JS"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"convert-C-to-F.js"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" temperature"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("The "),s("code",[t._v("transform")]),t._v(" method tries to transform the given value and if it does not succeed it returns the original unchanged value.\nIn contrast to the "),s("code",[t._v("transform")]),t._v(" method, the "),s("code",[t._v("transformRaw")]),t._v(" method does not catch any "),s("code",[t._v("TransformationException")]),t._v("s internally, but throws them, so that the caller can handle it.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token function"}},[t._v("transformRaw")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"<transformation-identifier>"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"<transf. expression or transf. file name>"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("input"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("data or variable"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" temperature "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("transform")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"JSONPATH"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"$.temperature"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" jsonstring"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("catch")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TransformationException e"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token function"}},[t._v("logError")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"Error"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Some bad stuff happened in my rule: "')]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" e"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getMessage"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// always runs even if there was an error, good place for cleanup")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"logging"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logging","aria-hidden":"true"}},[this._v("#")]),this._v(" Logging")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token function"}},[t._v("logDebug")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String loggerName"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" String format"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Object"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" args"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token function"}},[t._v("logInfo")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String loggerName"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" String format"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Object"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" args"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token function"}},[t._v("logWarn")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String loggerName"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" String format"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Object"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" args"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token function"}},[t._v("logError")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String loggerName"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" String format"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Object"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" args"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("In each case, the "),a("code",[this._v("loggerName")]),this._v(" parameter is combined with the string "),a("code",[this._v("org.eclipse.smarthome.model.script.")]),this._v(" to create the log4j logger name.\nFor example, if your rules file contained the following log message:")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token function"}},[t._v("logDebug")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"kitchen"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Kitchen light turned on"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("log:set DEBUG org.eclipse.smarthome.model.script.kitchen\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"rule-examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rule-examples","aria-hidden":"true"}},[this._v("#")]),this._v(" Rule Examples")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rules"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Number")]),t._v(" counter\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// setting the counter to some initial value")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// we could have done this in the variable declaration already")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("rule")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Startup"')]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("when")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("System started")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    counter "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// increase the counter at midnight")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("rule")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Increase counter"')]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("when")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("Time cron")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"0 0 0 * * ?"')]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    counter "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" counter "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// tell the number of days either at noon or if a button is pressed")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("rule")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Announce number of days up"')]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("when")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("Time is noon")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("or")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("Item")]),t._v(" AnnounceButton "),s("span",{attrs:{class:"token keyword"}},[t._v("received command")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("ON")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),s("span",{attrs:{class:"token function"}},[t._v("say")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"The system is up since "')]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" counter "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('" days"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// sets the counter to the value of a received command")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("rule")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Set the counter"')]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("when")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("Item")]),t._v(" SetCounterItem "),s("span",{attrs:{class:"token keyword"}},[t._v("received command")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    counter "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" receivedCommand "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DecimalType")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"further-examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#further-examples","aria-hidden":"true"}},[this._v("#")]),this._v(" Further Examples")])}],!1,null,null,null);n.options.__file="rules-dsl.md";a.default=n.exports}}]);