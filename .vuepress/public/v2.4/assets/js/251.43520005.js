(window.webpackJsonp=window.webpackJsonp||[]).push([[251],{848:function(e,t,n){"use strict";n.r(t);var r=n(0),o=Object(r.a)({},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[e._m(0),e._v(" "),n("p",[e._v("This is an openHAB binding for a Pentair Pool System. It is based on combined efforts of many on the internet in reverse-engineering the proprietary Pentair protocol (see References section). The binding was developed and tested on a system with a Pentair EasyTouch controller, but should operate with other Pentair systems.")]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),n("p",[e._v("This binding requires an adapter to interface to the Pentair system bus. This bus/wire runs between the Pentair control system, indoor control panels, IntelliFlo pumps, etc. It is a standard RS-485 bus running at 9600,8N1 so any RS-485 adapter should work and you should be able to buy one for under $30. Pentair does not publish any information on the protocol so this binding was developed using the great reverse-engineering efforts of others made available on the internet.  I have cited sevearl of those in the References section below.")]),e._v(" "),e._m(3),e._v(" "),n("p",[e._v("A usb or serial RS-485 interface or IP based interface can be used to interface to the Pentair system bus. The binding includes 2 different bridge Things depending on which type of interface you use, serial_bridge or ip_bridge.")]),e._v(" "),n("p",[e._v('If your openHAB system is physically located far from your Pentair equipment or indoor control panel, you can use a Raspberry Pi or other computer to redirect USB/serial port traffic over the internet using a program called ser2sock (see Reference section). An example setup would run the following command: "ser2sock -p 10000 -s /dev/ttyUSB1 -b 9600 -d". Note: This is the setup utlized for the majority of my testing of this binding.')]),e._v(" "),e._m(4),e._v(" "),n("p",[e._v("Once you have the interface connected to your system, it is best to test basic connectivity. Note the protocol is a binary protocol (not ASCII text based) and in order to view the communication packets, one must use a program capable of a binary/HEX mode. If connected properly, you will see a periodic traffic with packets staring with FF00FFA5.  This is the preamble for Pentairs communication packet. After you see this traffic, you can proceed to configuring the Pentair binding in openHAB.")]),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),n("p",[e._v('In order for the Pentair EasyTouch controller to receive commands from this binding, you may need to enable "Spa-side" remote on the controller itself.')]),e._v(" "),e._m(10),e._v(" "),n("p",[e._v("This binding supports the following thing types:")]),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),n("p",[e._v('There are no overall binding configurations that need to be set up as all configuration is done at the "Thing" level.')]),e._v(" "),e._m(13),e._v(" "),n("p",[e._v("Pentair things can be configured either through the online Paper UI configuration, or manually through a 'pentair.thing' configuration file.  The following table shows the available configuration parameters for each thing.")]),e._v(" "),n("p",[e._v("| Thing         | Configuration Paramaters\n| _____________ | __________________________\n| ip_bridge     | address - IP address for the RS-485 adapter - Required.\n|               | port - TCP port for the RS-485 adapter - Not Required - default = 10000.\n|               | id - ID to use when communciating on Pentair control bus - devault = 34.\n| serial_bridge | serialPort - Serial port for the IT-100s bridge - Required.\n|               | baud - Baud rate of the IT-100 bridge - Not Required - default = 9600.\n|               | pollPeriod - Period of time in minutes between the poll command being sent to the IT-100 bridge - Not Required - default=1.\n|               | id - ID to use when communciating on Pentair control bus - devault = 34.")]),e._v(" "),n("p",[e._v("Currently automatic discovery is not supported and the binding requires configuration via the PaperUI or a file in the conf/things folder.  Here is an example of a thing configuration file called 'pentair.thing':")]),e._v(" "),e._m(14),e._v(" "),e._m(15),e._v(" "),n("p",[e._v("Pentair things support a variety of channels as seen below in the following table:")]),e._v(" "),n("p",[e._v("| Channel         | Item Type  | Description\n| _______________ | __________ | __________________\n| EasyTouch Controller | |\n| pooltemp        | Number     | Current pool temperature (readonly)\n| spatemp         | Number     | Current spa temperature (readonly)\n| airtemp         | Number     | Current air temperature (readonly)\n| solartemp       | Number     | Current solar temperature (readonly)\n| poolheatmode    | Number     | Current heat mode setting for pool (readonly): 0=Off, 1=Heater, 2=Solar Preferred, 3=Solar\n| poolheatmodestr | String     | Current heat mode setting for pool in string form (readonly)\n| spaheatmode     | Number     | Current heat mode setting for spa (readonly): 0=Off, 1=Heater, 2=Solar Preferred, 3=Solar\n| spaheatmodestr  | String     | Current heat mode setting for spa in string form (readonly)>\n| poolsetpoint    | Number     | Current pool temperature set point\n| spasetpoint     | Number     | Current spa temperature set point\n| heatactive      | Number     | Heater mode is active\n| pool            | Switch     | Primary pool mode\n| spa             | Switch     | Spa mode\n| aux1            | Switch     | Aux1 mode\n| aux2            | Switch     | Aux2 mode\n| aux3            | Switch     | Aux3 mode\n| aux4            | Switch     | Aux4 mode\n| aux5            | Switch     | Aux5 mode\n| aux6            | Switch     | Aux6 mode\n| aux7            | Switch     | Aux7 mode\n| IntelliChlor    | |\n| saltoutput      | Number     | Current salt output % (readonly)\n| salinity        | Number     | Salinity (ppm) (readonly)\n| IntelliFlo Pump | |\n| run             | Number     | Pump running (readonly)\n| drivestate      | Number     | Pump drivestate (readonly)\n| mode            | Number     | Pump mode (readonly)\n| rpm             | Number     | Pump RPM (readonly)\n| power           | Number     | Pump power in Watts (readonly)\n| error           | Number     | Pump error (readonly)\n| ppc             | Number     | Pump PPC? (readonly)")]),e._v(" "),e._m(16),e._v(" "),n("p",[e._v("The following is an example of an item file (pentair.items):")]),e._v(" "),e._m(17),e._v(" "),n("p",[e._v("Here is an example sitemap:")]),e._v(" "),e._m(18),e._v(" "),e._m(19),e._v(" "),n("p",[e._v("Setting up RS485 and basic protocol - "),n("a",{attrs:{href:"http://www.sdyoung.com/home/decoding-the-pentair-easytouch-rs-485-protocol/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://www.sdyoung.com/home/decoding-the-pentair-easytouch-rs-485-protocol/"),n("OutboundLink")],1),e._v("\nser2sock Github - "),n("a",{attrs:{href:"https://github.com/nutechsoftware/ser2sock",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/nutechsoftware/ser2sock"),n("OutboundLink")],1)]),e._v(" "),e._m(20),e._v(" "),e._m(21),e._v(" "),n("DocPreviousVersions"),e._v(" "),n("EditPageLink")],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"pentair-pool"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pentair-pool","aria-hidden":"true"}},[this._v("#")]),this._v(" Pentair Pool")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"hardware-setup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hardware-setup","aria-hidden":"true"}},[this._v("#")]),this._v(" Hardware Setup")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("REQUISITE DISCLAIMER: CONNECTING 3RD PARTY DEVICES TO THE PENTAIR SYSTEM BUS COULD CAUSE SERIOUS DAMAGE TO THE SYSTEM SHOULD SOMETHING MALFUNCTION.  IT IS NOT ENDORSED BY PENTAIR AND COULD VOID WARRENTY. IF YOU DECIDE TO USE THIS BINDING TO INTERFACE TO A PENTAIR CONTROLLER, THE AUTHOR(S) CAN NOT BE HELD RESPONSIBLE.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"connecting-adapter-to-your-system"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#connecting-adapter-to-your-system","aria-hidden":"true"}},[this._v("#")]),this._v(" Connecting adapter to your system")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Note: if you are on a linux system, the framework may not see a symbolically linked device (i.e. /dev/ttyRS485).  To use a symbolically linked device, add the following line to /etc/default/openhab2, "),t("code",[this._v('EXTRA_JAVA_OPTS="-Dgnu.io.rxtx.SerialPorts=/dev/ttyRS485"')])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"usb-serial-interface"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usb-serial-interface","aria-hidden":"true"}},[this._v("#")]),this._v(" USB/Serial interface")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("For a USB/Serial interface, you can use most terminal emulators. For linux, you can use minicom with the following options: "),t("code",[this._v("minicom -H -D /dev/ttyUSB1 -b 9600")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"ip-interface"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ip-interface","aria-hidden":"true"}},[this._v("#")]),this._v(" IP interface")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("For an IP based interface (or utilizing ser2sock) on a linux system, you can use nc command with the following options: "),t("code",[this._v("nc localhost 10000 | xxd")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"pentair-controller-panel-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pentair-controller-panel-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Pentair Controller panel configuration")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"supported-things"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#supported-things","aria-hidden":"true"}},[this._v("#")]),this._v(" Supported Things")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("| Thing           | Thing Type | Description"),t("br"),this._v("\n| _______________ | :________: | _______________________________________\n| ip_bridge       | Bridge     | A TCP network RS-485 bridge device.\n| serial_bridge   | Bridge     | A USB or serial RS-485 device.\n| EasyTouch       | Thing      | Pentiar EasyTouch pool controller.\n| Intelliflo Pump | Thing      | Pentair Intelliflo variable speed pump.\n| Intellichlor    | Thing      | Pentair Intellichlor chlorinator.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"binding-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#binding-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Binding Configuration")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"thing-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#thing-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Thing Configuration")])},function(){var e=this.$createElement,t=this._self._c||e;return t("pre",[t("code",[this._v('Bridge pentair:ip_bridge:1 [ address="192.168.1.202", port=10001 ] {\n    easytouch main [ id=16 ]\n    intelliflo pump1 [ id=96 ]\n    intellichlor ic40\n}\n')])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"channels"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#channels","aria-hidden":"true"}},[this._v("#")]),this._v(" Channels")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"full-example"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#full-example","aria-hidden":"true"}},[this._v("#")]),this._v(" Full Example")])},function(){var e=this.$createElement,t=this._self._c||e;return t("pre",[t("code",[this._v('Group gPool          "Pool"\n\nNumber Pool_Temp               "Pool Temp [%.1f °F]"          <temperature>   (gPool)   { channel = "pentair:easytouch:1:main:pooltemp" }\nNumber Spa_Temp                "Spa Temp [%.1f °F]"           <temperature>   (gPool)   { channel = "pentair:easytouch:1:main:spatemp" }\nNumber Air_Temp                "Air Temp [%.1f °F]"           <temperature>   (gPool)   { channel = "pentair:easytouch:1:main:airtemp" }\nNumber Solar_Temp              "Solar Temp [%.1f °F]"         <temperature>   (gPool)   { channel = "pentair:easytouch:1:main:solartemp" }\n\nNumber PoolHeatMode            "Pool Heat Mode [%d]"                          (gPool)   { channel="pentair:easytouch:1:main:poolheatmode" }\nString PoolHeatModeStr         "Pool Heat Mode [%s]"                          (gPool)   { channel="pentair:easytouch:1:main:poolheatmodestr" }\nNumber SpaHeatMode             "Spa Heat Mode [%d]"                           (gPool)   { channel="pentair:easytouch:1:main:spaheatmode" }\nString SpaHeatModeStr          "Spa Heat Mode [%s]"                           (gPool)   { channel="pentair:easytouch:1:main:spaheatmodestr" }\nPoolSetPoint                   "Pool Set Point [%.1f °F]"                     (gPool)   { channel="pentair:easytouch:1:main:poolsetpoint" }\nNumber SpaSetPoint             "Spa Set Point [%.1f °F]"                      (gPool)   { channel="pentair:easytouch:1:main:spasetpoint" }    \nNumber HeatActive              "Heat Active [%d]"                             (gPool)  { channel="pentair:easytouch:1:main:heatactive" }\n\nSwitch Mode_Spa                 "Spa Mode"                                    (gPool)  { channel = "pentair:easytouch:1:main:spa" }\nSwitch Mode_Pool                "Pool Mode"                                   (gPool)  { channel = "pentair:easytouch:1:main:pool" }\nSwitch Mode_PoolLight           "Pool Light"                                  (gPool)  { channel = "pentair:easytouch:1:main:aux1" }\nSwitch Mode_SpaLight            "Spa Light"                                   (gPool)  { channel = "pentair:easytouch:1:main:aux2" }\nSwitch Mode_Jets                "Jets"                                        (gPool)  { channel = "pentair:easytouch:1:main:aux3" }\nSwitch Mode_Boost               "Boost Mode"                                  (gPool)  { channel = "pentair:easytouch:1:main:aux4" }\nSwitch Mode_Aux5                "Aux5 Mode"                                   (gPool)  { channel = "pentair:easytouch:1:main:aux5" }\nSwitch Mode_Aux6                "Aux6 Mode"                                   (gPool)  { channel = "pentair:easytouch:1:main:aux6" }\nSwitch Mode_Aux7                "Aux7 Mode"                                   (gPool)  { channel = "pentair:easytouch:1:main:aux7" }\n\nNumber SaltOutput               "Salt Output [%d%%]"                          (gPool)  { channel = "pentair:intellichlor:1:ic40:saltoutput" }\nNumber Salinity                 "Salinity [%d ppm]"                           (gPool)  { channel = "pentair:intellichlor:1:ic40:salinity" }\n\nSwitch Pump_Run                 "Pump running [%d]"                           (gPool) { channel = "pentair:intelliflo:1:pump1:run" }\nNumber Pump_DriveState          "Pump drivestate [%d]"                        (gPool) { channel = "pentair:intelliflo:1:pump1:drivestate" }\nNumber Pump_Mode                "Pump Mode [%d]"                              (gPool) { channel = "pentair:intelliflo:1:pump1:mode" }\nNumber Pump_RPM                 "Pump RPM [%d]"                               (gPool) { channel = "pentair:intelliflo:1:pump1:rpm" }\nNumber Pump_Power               "Pump Power [%d W]"                           (gPool) { channel = "pentair:intelliflo:1:pump1:power" }\nNumber Pump_Error               "Pump Error [%d]"                             (gPool) { channel = "pentair:intelliflo:1:pump1:error" }\nNumber Pump_PPC                 "Pump PPC [%d]"                               (gPool) { channel = "pentair:intelliflo:1:pump1:ppc" }\n')])])},function(){var e=this.$createElement,t=this._self._c||e;return t("pre",[t("code",[this._v('Frame label="Pool" {\n   Switch item=Mode_Spa\n   Switch item=Mode_PoolLight\n   Switch item=Mode_SpaLight\n   Switch item=Mode_Jets\n   Text item=Pool_Temp valuecolor=[>82="red",>77="orange",<=77="blue"]\n   Text item=Spa_Temp valuecolor=[>97="red",>93="orange",<=93="blue"]\n   Setpoint item=SpaSetPoint minValue=85 maxValue=103 step=1.0\n   Group item=gPool label="Advanced"\n}\n')])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"references"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#references","aria-hidden":"true"}},[this._v("#")]),this._v(" References")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"future-enhancements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#future-enhancements","aria-hidden":"true"}},[this._v("#")]),this._v(" Future Enhancements")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("Add automatic discovery of devices on RS-485")]),this._v(" "),t("li",[this._v("Add in IntelliBrite light color selection (need to capture protocol on system that has this)")]),this._v(" "),t("li",[this._v("Add direct control of pump (non read-only channels)")]),this._v(" "),t("li",[this._v("Fix heat active - not working on my system.")])])}],!1,null,null,null);o.options.__file="readme.md";t.default=o.exports}}]);